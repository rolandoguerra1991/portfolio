---
import '../styles/global.css';
import { getCollection } from 'astro:content';
import Button from '../components/Button.astro';
import ExperienceItem from '../components/ExperienceItem.astro';
import ProjectCard from '../components/ProjectCard.astro';
import ProjectsEmpty from '../components/ProjectsEmpty.astro';
import SectionHeader from '../components/SectionHeader.astro';
import StackCard from '../components/StackCard.astro';

const projects = (await getCollection('projects'))
    .map((entry: { id: any; data: any; }) => ({
        id: entry.id,
        ...entry.data,
    }))
    .sort((a: { order: any; }, b: { order: any; }) => (a.order ?? 999) - (b.order ?? 999));

const stackItems = (await getCollection('stack'))
    .map((entry) => ({
        id: entry.id,
        ...entry.data,
    }))
    .sort((a, b) => (a.order ?? 999) - (b.order ?? 999));

const experienceItems = (await getCollection('experience'))
    .map((entry) => ({
        id: entry.id,
        ...entry.data,
    }))
    .sort((a, b) => (a.order ?? 999) - (b.order ?? 999));
---

<html lang="en" class="page-root">
	<head>
		<meta charset="utf-8" />
        <link rel="icon" type="image/svg+xml" href={`${import.meta.env.BASE_URL}favicon.svg`} />
        <link rel="icon" href={`${import.meta.env.BASE_URL}favicon.ico`} />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Rolando Guerra | Frontend Developer</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	</head>
    <body class="page">

    <!-- Navbar -->
    <nav class="site-nav">
        <div class="page__container site-nav__inner">
            <div class="site-nav__brand">Rolando Guerra</div>
            <div class="site-nav__links">
                <a href="#home" class="site-nav__link">Home</a>
                <a href="#stack" class="site-nav__link">Stack</a>
                <a href="#projects" class="site-nav__link">Projects</a>
                <a href="#experience" class="site-nav__link">Experience</a>
                <a href="#contact" class="site-nav__link">Contact</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="page__container hero__inner">

            <!-- Profile Image Container -->
            <div class="reveal hero__profile" style="transition-delay: 0.1s;">
                <div class="hero__profile-ring">
                    <div class="hero__profile-frame">
                        <!-- Replace the src with your actual image path -->
                        <img src="/portfolio/photo.png" alt="Rolando Guerra" class="hero__profile-image">
                    </div>
                </div>
                <!-- Badge (Optional) -->
                <div class="hero__profile-badge">
                    Available
                </div>
            </div>

            <h1 class="reveal hero__title">
                Crafting high-end <br><span class="hero__title-accent">web experiences</span>
            </h1>
            <p class="reveal hero__subtitle" style="transition-delay: 0.2s;">
                I am a frontend web developer with experience in creating reusable components using the Atomic Design methodology.
            </p>
            <div class="reveal hero__actions" style="transition-delay: 0.4s;">
                <Button href="#projects" label="View Projects" />
                <Button
                    href="https://www.linkedin.com/in/rolando-guerra-84a5ba117/"
                    label="LinkedIn"
                    variant="ghost"
                    external
                />
            </div>
        </div>
    </section>

    <!-- Tools Section -->
    <section id="stack" class="stack">
        <div class="page__container">
            <SectionHeader title="Full Stack & Tools" />

            <div class="stack__grid">
                {stackItems.map((item) => (
                    <StackCard
                        iconClass={item.iconClass}
                        iconText={item.iconText}
                        label={item.label}
                        hint={item.hint}
                        delay={item.delay}
                    />
                ))}
            </div>
        </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="projects">
        <div class="page__container">
            <SectionHeader title="Featured Projects" />

            {projects.length ? (
                <div class="projects__grid">
                    {projects.map((project: { icon: any; link: string | URL | null | undefined; title: unknown; description: unknown; tags: unknown[]; }, index: number) => (
                        <ProjectCard project={project} index={index} />
                    ))}
                </div>
            ) : (
                <ProjectsEmpty />
            )}
        </div>
    </section>

    <!-- Experience Section -->
    <section id="experience" class="experience">
        <div class="page__container experience__container">
            <SectionHeader title="Professional Experience" />

            <div class="experience__timeline">
                {experienceItems.map((item) => (
                    <ExperienceItem
                        date={item.date}
                        role={item.role}
                        company={item.company}
                        summary={item.summary}
                        detail={item.detail}
                        delay={item.delay}
                    />
                ))}
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contact" class="site-footer">
        <div class="page__container site-footer__inner">
            <h2 class="reveal site-footer__title">Let's work together</h2>
            <p class="reveal site-footer__subtitle">I'm currently available for new opportunities and collaborations.</p>
            <div class="site-footer__links">
                <a href="https://github.com/rolandoguerra1991" target="_blank" class="site-footer__link" title="GitHub">
                    <i class="fab fa-github"></i>
                </a>
                <a href="https://www.linkedin.com/in/rolando-guerra-84a5ba117/" target="_blank" class="site-footer__link" title="LinkedIn">
                    <i class="fab fa-linkedin"></i>
                </a>
            </div>
            <p class="site-footer__legal">Â© 2026 Rolando Guerra.</p>
        </div>
    </footer>

    <script src="../scripts/reveal.js"></script>
</body>
</html>
